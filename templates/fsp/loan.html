{% extends 'fsp/fsp-base.html' %}
{% block title %}Laminu:Dashbord{% endblock %}

{% block content %}
        <!-- create Loan -->
        <div class=" flex flex-col space-y-4 md:space-y-0  md:space-x-4 md:flex-row justify-between my-5 sm:my-10 ">
            <form class="flex items-center rounded-lg shadow bg-dark-green max-w-xs">
                <input class="bg-white py-3 px-2 sm:p-6 rounded-lg focus:outline focus:outline-dark-green focus:border-dark-green hover:ring-1 ring-dark-green" type="search" name="loan" id="loan" placeholder="Search Loan">
                <button class="py-3 px-2 sm:p-6 text-white font-semibold text-sm sm:text-base" type="submit" value="search">Search</button>
            </form>

            <a href="{% url 'loans:create_loan' %}" >
            <div class=" bg-white rounded-lg shadow max-w-xs p-3 sm:p-6 hover:bg-gray-300">

                    <div class=" flex items-center justify-between space-x-4">
                        <h2 class=" text-xs sm:text-base text-gray-500">Create New Loan Program</h2>
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                              </svg>
                        </div>
                    </div>
            </div>
            </a>



        </div>
        <!-- end of create loan -->

        <div class="my-5 sm:my-10">
            <h1 class="text-lg sm:text-4xl text-dark-gray">List of Loans</h1>
        </div>

        <!-- loan table -->
        <div class="flex overflow-auto">
            <div class="flex flex-col">
                <div class="w-full">
                    <div class="border-b border-gray-200 shadow">
                        <table class="divide-y divide-gray-300 ">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-2 text-xs text-gray-500">
                                        ID
                                    </th>
                                    <th class="px-6 py-2 text-xs text-gray-500">
                                        Program Title
                                    </th>
                                    <th class="px-6 py-2 text-xs text-gray-500">
                                        Size
                                    </th>
                                    <th class="px-6 py-2 text-xs text-gray-500">
                                        Sector
                                    </th>
                                    <th class="px-6 py-2 text-xs text-gray-500">
                                        Amount
                                    </th>
                                    <th class="px-6 py-2 text-xs text-gray-500">
                                        Applicants
                                    </th>
                                    <th class="px-6 py-2 text-xs text-gray-500">
                                        Active
                                    </th>
                                    <th class="px-6 py-2 text-xs text-gray-500">
                                        Paying Days
                                    </th><th class="px-6 py-2 text-xs text-gray-500">
                                       Grace period
                                    </th><th class="px-6 py-2 text-xs text-gray-500">
                                        Collateral
                                    </th>
                                </tr>
                            </thead>

                            {% for loan in loans %}
                            <tbody class="bg-white divide-y divide-gray-300">
                                <tr class="whitespace-nowrap">
                                    <td class="px-6 py-4 text-sm text-gray-500">
                                        1
                                    </td>
                                    <td class="px-6 py-4">
                                       <a href="{% url 'loans:loan_details' loan.id %}">
                                        <div class="text-sm text-gray-900 bg-gray-200 px-4 py-1 rounded-full">
                                            {{ loan.program_title }}
                                        </div>
                                       </a>
                                    </td>
                                    <td class="px-6 py-4">
                                        <div class="text-sm text-gray-500">medium</div>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-500">
                                        {% for sector in loan.sectors.all %}
                                        {{ sectors.name }}
                                            {% endfor %}
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-500">
                                        {{ loan.amount }}
                                    </td>
                                    <td class="px-6 py-4">
                                        <a href="{% url 'loans:beneficiaries' loan.id %}">
                                         <div class="text-sm text-blue-900 bg-blue-200 px-4 py-1 rounded-full">
                                             {{ loan.beneficiaries.all.count }}
                                         </div>
                                        </a>
                                     </td>

                                    <td class="px-6 py-4 text-sm">
                                           {% if  loan.is_active %}
                                        <span class="px-4 py-1 text-green-600 bg-green-200 rounded-full">Yes</span>
                                        {% else %}
                                        <span class="px-4 py-1 text-red-600 bg-red-200 rounded-full">No</span>
                                            {% endif %}
                                    </td>

                                    <td class="px-6 py-4 text-sm text-gray-500">
                                        {{ loan.paying_days }}
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-500">
                                       {{ loan.grace_period }}
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-500">
                                        {{ loan.collateral }}
                                    </td>
                                </tr>



                            </tbody>
                            {% endfor %}
                        </table>
                    </div>
                </div>
            </div>
        </div>


          <!-- end loan table -->

{% endblock %}